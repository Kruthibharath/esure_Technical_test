function bringSelectedIframeToTop(e){raiseSelectedIframe=e}function allowDragOffScreen(e){allowDragOffScreen=e}function addHandle(obj,win){if(!("ontouchstart"in window||navigator.maxTouchPoints)||!navigator.userAgent.match(/(android)/i))if(2!=arguments.length||win!=window){for(var topRef=win,topRefStr="window";topRef.parent&&topRef.parent!=window;)topRef=topRef.parent,topRefStr+=".parent";if(void 0===win.mainHandlersAdded||!win.mainHandlersAdded)with(win)eval("function OnMouseDownHandler(evt) { if(typeof(evt) == 'undefined'){evt = event;}"+topRefStr+".parent.begindrag(evt, "+topRefStr+") }"),eval("document.onmousedown = OnMouseDownHandler;"),eval("function OnMouseUpHandler(evt) { if(typeof(evt) == 'undefined'){evt = event;}"+topRefStr+".parent.enddrag(evt, "+topRefStr+") }"),eval("document.onmouseup = OnMouseUpHandler;"),eval("function OnMouseMoveHandler(evt) { if(typeof(evt) == 'undefined'){evt = event;}"+topRefStr+".parent.iframemove(evt, "+topRefStr+") }"),eval("document.onmousemove = OnMouseMoveHandler;"),win.handlersAdded=!0,win.mainHandlersAdded=!0;void 0===window.handlersAdded&&window.handlersAdded||(eval("function OnMouseMoveHandler(evt) { if(typeof(evt) == 'undefined'){evt = event;}mouseMove(evt, window) }"),eval("document.onmousemove = OnMouseMoveHandler;"),window.handlersAdded=!0),obj.style.cursor="move";var name=getIframeId(topRef);null==handles[name]&&(handles[name]=new Array,iframeMouseDownLeft[name]=0,iframeMouseDownTop[name]=0,pageMouseDownLeft[name]=0,pageMouseDownTop[name]=0),handles[name][handles[name].length]=obj,obj.oncontextmenu=function(){return!1}}else for(var p=win;p=p.parent;){if(p.addHandle)return void p.addHandle(obj,win,!0);if(p==win.top)return}}function getEventPosition(e){var n=new Object;return n.x=0,n.y=0,e||(e=window.event),"number"==typeof e.pageX?(n.x=e.pageX,n.y=e.pageY):(n.x=e.clientX,n.y=e.clientY,top.opera||(window.document.compatMode&&"BackCompat"!=window.document.compatMode?(n.x+=window.document.documentElement.scrollLeft,n.y+=window.document.documentElement.scrollTop):(n.x+=window.document.body.scrollLeft,n.y+=window.document.body.scrollTop))),n}function getIframeId(e){for(var n=document.getElementsByTagName("iframe"),t=0,o=n.length;t<o;t++){var i=n.item(t),a=null;if(i.contentWindow?a=i.contentWindow:window.frames&&window.frames[i.id].window&&(a=window.frames[i.id]),a==e)return iframeWindows[i.id]=e,iframeObjects[i.id]=i,i.id}return null}function getObjectXY(obj){function getOffset(e){for(var n=0,t=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)n+=e.offsetLeft-e.scrollLeft,t+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{top:t,left:n}}var ie=synthetix.detectIE(),res=new Object,oStyle=!ie&&synthetix.styleLookup(obj.parentNode,["bottom","right","left","top"]),styleP=!ie&&oStyle.replace(/px/g,"").replace(/;/g,","),pos=ie?getOffset(obj.parentNode):JSON.parse(JSON.stringify(eval("("+styleP+")")));return res.x=0,res.y=0,null!=obj&&(res.x=pos.left,res.y=pos.top),synthetix.window.position=res,res}function getSrcElement(e){for(var n=e.target;1!=n.nodeType;)n=n.parentNode;return n}function isHandleClicked(e,n){if(e==n)return!0;for(;null!=n.parentNode;){if(n==e)return!0;n=n.parentNode}return!1}function begindrag(e,n){var t=getIframeId(n);if(null!=t&&!e.target.attributes["syn-click"]&&!(null==handles[t]||handles[t].length<1)){for(var o=!1,i=e.srcElement||getSrcElement(e),a=0,r=handles[t].length;a<r;a++)if(isHandleClicked(handles[t][a],i)){o=!0;break}if(!o)return!1;iframeBeingDragged=t,raiseSelectedIframe&&(iframeObjects[iframeBeingDragged].style.zIndex=highestZIndex++),dragging=!0;var d=getEventPosition(e);iframeMouseDownLeft[iframeBeingDragged]=d.x,iframeMouseDownTop[iframeBeingDragged]=d.y;var s=getObjectXY(iframeObjects[iframeBeingDragged]);pageMouseDownLeft[iframeBeingDragged]=s.x-0+d.x,pageMouseDownTop[iframeBeingDragged]=s.y-0+d.y}}function enddrag(){if(dragging=!1,iframeBeingDragged="",synthetix.container.style.top.length>0||synthetix.container.style.top.length>0){var e={framePosition:{top:synthetix.container.style.top,left:synthetix.container.style.left,channel:synthetix.productSelect.channel}};synthetix.variables.framePosition&&e.framePosition.top==synthetix.variables.framePosition.top&&e.framePosition.left==synthetix.variables.framePosition.left||synthetix.patchVariables(e)}}function mouseMove(e){if(synthetix.container&&!synthetix.hasClass(window.parent.document.body,"sx_minimised")&&dragging&&(!synthetix.frame||!synthetix.hasClass(window.document.body,"sx_expanded_full_screen"))){var n=getEventPosition(e);drag(n.x-pageMouseDownLeft[iframeBeingDragged],n.y-pageMouseDownTop[iframeBeingDragged])}}function iframemove(e){if(synthetix.container&&!synthetix.hasClass(window.parent.document.body,"sx_minimised")&&dragging&&(!synthetix.frame||!synthetix.hasClass(window.document.body,"sx_expanded_full_screen"))){var n=getEventPosition(e);drag(n.x-iframeMouseDownLeft[iframeBeingDragged],n.y-iframeMouseDownTop[iframeBeingDragged])}}function drag(e,n){var t=getObjectXY(iframeObjects[iframeBeingDragged]),o=t.x-0+e,i=t.y-0+n;if(!allowDragOffScreen){var a=synthetix.elementDimensions(synthetix.container),r=window.outerWidth-a.width,d=window.outerHeight-a.height;o<0&&(o=0),i<0&&(i=0),o>r&&(o=r),i>d&&(i=d)}iframeObjects[iframeBeingDragged].parentNode.style.left=o+"px",iframeObjects[iframeBeingDragged].parentNode.style.top=i+"px",pageMouseDownLeft[iframeBeingDragged]+=e,pageMouseDownTop[iframeBeingDragged]+=n}bringSelectedIframeToTop(!0);var dragging=!1,iframeBeingDragged="",iframeObjects=new Object,iframeWindows=new Object,iframeMouseDownLeft=new Object,iframeMouseDownTop=new Object,pageMouseDownLeft=new Object,pageMouseDownTop=new Object,handles=new Object,highestZIndex=99,raiseSelectedIframe=!1,allowDragOffScreen=!1;